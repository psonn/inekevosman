<% provide(:title, 'Artikelen') %>

<div class="panel panel-default">
  <div class="panel-heading"><h1>Artikelen (<%= @articles.count %>)</h1></div>
  <div class="panel-body">
    <% if user_signed_in? %>
    <%= link_to("Nieuw artikel", [:new, :article], :class => 'btn btn-primary') %>
    <% end %>
  </div>
<table class="table table-hover">
  <thead>
  <tr>
    <th>Afbeelding</th>
    <th>Titel</th>
    <th>Auteur</th>
    <th></th>
  </tr>
  </thead>
  <% @articles.each do |article| %>
  <tbody>
    <tr>
      <td><%= image_tag article.image.url(:thumb) %></td>
      <td><%= article.title %></td>
      <td><%= article.user.username if article.user %></td>
      <td>
        <div class="btn-group">
  <button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown">
    Opties <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" role="menu">
    <li>
      <%= link_to article_path(article) do %>
        <span class="glyphicon glyphicon-eye-open"></span> Toon artikel
      <% end %>
      </li>    
    <% if current_user && article.user == current_user %>
    <li>
      <%= link_to edit_article_path(article) do %>
        <span class="glyphicon glyphicon-edit"></span> Bewerk artikel
      <% end %>
      </li>
    <li class="divider"></li>
    <li>
      <%= link_to article, method: :delete, data: { confirm: 'Are you sure?' } do %>
        <span class="glyphicon glyphicon-trash"></span> Verwijder artikel
      <% end %>
    </li>
    <% end %>
  </ul>
</div>
      </td>
    </tr>
  </tbody>
  <% end %>
  </table>
  <div class="panel-footer">
    <div class="center">
      <%= will_paginate @posts, renderer: BootstrapPagination::Rails %>
    </div>
  </div>
</div>